p8105\_hw2\_al3851.Rmd
================

``` r
library(tidyverse)
```

    ## -- Attaching packages -------------------------------------------------------------------------------- tidyverse 1.2.1 --

    ## v ggplot2 3.0.0     v purrr   0.2.5
    ## v tibble  1.4.2     v dplyr   0.7.6
    ## v tidyr   0.8.1     v stringr 1.3.1
    ## v readr   1.1.1     v forcats 0.3.0

    ## -- Conflicts ----------------------------------------------------------------------------------- tidyverse_conflicts() --
    ## x dplyr::filter() masks stats::filter()
    ## x dplyr::lag()    masks stats::lag()

Problem 1
=========

Initial Cleaning
----------------

``` r
station_df = read_csv("./Data/NYC_Transit_Subway_Entrance_And_Exit_Data.csv") %>%
  janitor::clean_names() %>%
  select(line:entry, vending, ada) %>%
  mutate(vending = recode(vending, "YES" = TRUE, "NO" = FALSE)) %>%
  mutate(entry = recode(entry, "YES" = TRUE, "NO" = FALSE))
```

    ## Parsed with column specification:
    ## cols(
    ##   .default = col_character(),
    ##   `Station Latitude` = col_double(),
    ##   `Station Longitude` = col_double(),
    ##   Route8 = col_integer(),
    ##   Route9 = col_integer(),
    ##   Route10 = col_integer(),
    ##   Route11 = col_integer(),
    ##   ADA = col_logical(),
    ##   `Free Crossover` = col_logical(),
    ##   `Entrance Latitude` = col_double(),
    ##   `Entrance Longitude` = col_double()
    ## )

    ## See spec(...) for full column specifications.

The data is still not tidy because the train line and route number are arranged in the wide format, since each route number is a variable name. However, after cleaning the names of the columns I selected only the needed columns, and within the mutate function, I used recode so that the "YES" "NO" charcter values of vending and entry would now be the logical TRUE FALSE. The data set has 1868 rows which represent each entrance or exit to every station in NYC and the dataset has 19 variables which are `colnames(station_df)`.

ADA Compliance
--------------

I am using distinct with the parameter .keep\_all = TRUE to get a dataframe with just one row from each station. The number of rows will tell me the number of stations. The sum of the ada variable over the number of rows will tell me te proportion that is compliant.

``` r
distinct_station_df = station_df %>%
  distinct(line, station_name, .keep_all = TRUE)

n_stations = nrow(distinct_station_df)

sum(distinct_station_df$ada) / n_stations
```

    ## [1] 0.1806452

There are 465 distinct stations and 18 percent of the stations are ADA compliant.

A Train
-------

``` r
distinct_atrain_station_df = distinct_station_df %>%
  gather(key = route_number, value = route_name, route1:route11) %>%
  separate(route_number, sep = "route", into = c("remove1", "route")) %>%
  select(-remove1) %>%
  filter(route_name == "A")

distinct_atrain_ada_station_df = distinct_atrain_station_df %>%
  filter(ada == TRUE)
```

60 stations serve the A train and 17 of these stations are ada compliant

Problem 2
=========

Clean Mr. Trash
---------------

Along with rounding the number of sports balls to integers and filtering out totals, I will fill in the missing years by extracting the year from the date.

``` r
library(cellranger)
library(readxl)
library(lubridate)
```

    ## 
    ## Attaching package: 'lubridate'

    ## The following object is masked from 'package:base':
    ## 
    ##     date

``` r
mr_trash_df = read_excel("./Data/HealthyHarborWaterWheelTotals2017-9-26.xlsx", skip = 1, sheet = 1, range = "A2:N256") %>%
  janitor::clean_names() %>%
  filter(!is.na(dumpster)) %>%
  mutate(sports_balls = round(sports_balls, digits = 0)) %>%
  mutate(sports_balls = as.integer(sports_balls)) %>%
  mutate(year = ifelse(!is.na(year), year, year(date)))
```

Read in Precipitation
---------------------

``` r
precipitation_2017_df = read_excel("./Data/HealthyHarborWaterWheelTotals2017-9-26.xlsx", skip = 1, sheet = 3, range = "A2:B10") %>%
  janitor::clean_names() %>%
  mutate(year = 2017)


precipitation_2016_df = read_excel("./Data/HealthyHarborWaterWheelTotals2017-9-26.xlsx", skip = 1, sheet = 4, range = "A2:B14") %>%
  janitor::clean_names() %>%
  mutate( year = 2016)

precipitation_combined_df = bind_rows(precipitation_2017_df, precipitation_2016_df) %>%
  mutate(month = month.name[month])
```

I am filtering by year to get the maximum rainfall by year so I can report the months and the totals.

``` r
max_months_df = precipitation_combined_df %>%
  group_by(year) %>%
  filter(total == max(total)) %>%
  ungroup()
```

I am creating dataframes so I can report median number of items each year along with months that contain the maximum trash collected

``` r
mr_trash_2016_df = mr_trash_df %>%
  filter(year == 2016)


mr_trash_2016_totals = mr_trash_df %>%
  filter(year == 2016) %>%
  group_by(month) %>%
  summarise(sum(weight_tons)) %>%
  rename(sum_trash = `sum(weight_tons)`)
```

The precipitation dataset provides data for 20 months. The total rainfall in 2016 was 39.95 and the month with the maximum rainfall in 2016 was July with a total of 6.09 inches of rain. In 2017, the total amount of rain up until August was 39.95. The Mr Trash dataset provides data for 215 dumpsters and for each dumpster provides data for 13 variables. The median number of sports balls in a dumpster in 2016 was 26 In 2016 the month with the highest trash weight collected was July
